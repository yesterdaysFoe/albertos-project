jQuery(document).ready(function(b){var i;var e=false;var h;function c(){if(h){h.abort()}if(b("select#shipping_method").size()>0||b("input#shipping_method").size()>0){var j=b("#shipping_method").val()}else{var j=b("input[name=shipping_method]:checked").val()}var l=b("#order_review input[name=payment_method]:checked").val();var n=b("#billing_country").val();var k=b("#billing_state").val();var t=b("input#billing_postcode").val();var q=b("input#billing_city").val();var x=b("input#billing_address_1").val();var o=b("input#billing_address_2").val();if(b("#shiptobilling input").is(":checked")||b("#shiptobilling input").size()==0){var w=n;var u=k;var v=t;var p=q;var s=x;var m=o}else{var w=b("#shipping_country").val();var u=b("#shipping_state").val();var v=b("input#shipping_postcode").val();var p=b("input#shipping_city").val();var s=b("input#shipping_address_1").val();var m=b("input#shipping_address_2").val()}b("#order_methods, #order_review").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:0.6}});var r={action:"woocommerce_update_order_review",security:woocommerce_params.update_order_review_nonce,shipping_method:j,payment_method:l,country:n,state:k,postcode:t,city:q,address:x,address_2:o,s_country:w,s_state:u,s_postcode:v,s_city:p,s_address:s,s_address_2:m,post_data:b("form.checkout").serialize()};h=b.ajax({type:"POST",url:woocommerce_params.ajax_url,data:r,success:function(y){if(y){var z=b(y);b("#order_review").html(z.html());b("body").trigger("updated_checkout")}}})}b("body").bind("update_checkout",function(){clearTimeout(i);c()});b("p.password, form.login, .checkout_coupon, div.shipping_address").hide();b("input.show_password").change(function(){b("p.password").slideToggle()});b("a.showlogin").click(function(){b("form.login").slideToggle();return false});b("a.showcoupon").click(function(){b(".checkout_coupon").slideToggle();b("#coupon_code").focus();return false});b("#shiptobilling input").change(function(){b("div.shipping_address").hide();if(!b(this).is(":checked")){b("div.shipping_address").slideDown()}}).change();if(woocommerce_params.option_guest_checkout=="yes"){b("div.create-account").hide();b("input#createaccount").change(function(){b("div.create-account").hide();if(b(this).is(":checked")){b("div.create-account").slideDown()}}).change()}function a(){var j=true;if(b(e).size()){$required_siblings=b(e).closest(".form-row").siblings(".address-field.validate-required");if($required_siblings.size()){$required_siblings.each(function(){if(b(this).find("input.input-text").val()==""||b(this).find("input.input-text").val()=="undefined"){j=false}})}}if(j){e=false;b("body").trigger("update_checkout")}}b("#order_review").on("click",".payment_methods input.input-radio",function(){if(b(".payment_methods input.input-radio").length>1){b("div.payment_box").filter(":visible").slideUp(250);if(b(this).is(":checked")){b("div.payment_box."+b(this).attr("ID")).slideDown(250)}}else{b("div.payment_box").show()}}).find("input[name=payment_method]:checked").click();b("form.checkout").on("change","select#shipping_method, input[name=shipping_method], #shiptobilling input, .update_totals_on_change select",function(){clearTimeout(i);e=false;b("body").trigger("update_checkout")}).on("change",".address-field input.input-text, .update_totals_on_change input.input-text",function(){if(e){a()}}).on("change",".address-field select",function(){e=this;a()}).on("keydown",".address-field input.input-text, .update_totals_on_change input.input-text",function(k){var j=k.keyCode||k.which;if(j=="9"){return}e=this;clearTimeout(i);i=setTimeout(a,"1000")}).on("blur change",".input-text, select",function(){var l=b(this);var k=l.closest(".form-row");var m=true;if(k.is(".validate-required")){if(l.val()==""){k.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field");m=false}}if(k.is(".validate-email")){if(l.val()){var j=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);if(!j.test(l.val())){k.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email");m=false}}}if(m){k.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated")}}).submit(function(){if(grecaptcha.getResponse()==""){alert("Please Confirm you're not a robot.")}else{clearTimeout(i);var j=b(this);if(j.is(".processing")){return false}if(j.triggerHandler("checkout_place_order")!==false&&j.triggerHandler("checkout_place_order_"+b("#order_review input[name=payment_method]:checked").val())!==false){j.addClass("processing");var k=j.data();if(k["blockUI.isBlocked"]!=1){j.block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:0.6}})}b.ajax({type:"POST",url:woocommerce_params.checkout_url,data:j.serialize(),success:function(n){var l="";try{if(n.indexOf("<!--WC_START-->")>=0){n=n.split("<!--WC_START-->")[1]}if(n.indexOf("<!--WC_END-->")>=0){n=n.split("<!--WC_END-->")[0]}l=b.parseJSON(n);if(l.result=="success"){window.location=decodeURI(l.redirect)}else{if(l.result=="failure"){throw"Result failure"}else{throw"Invalid response"}}}catch(m){b(".woocommerce-error, .woocommerce-message").remove();if(l.messages){j.prepend(l.messages)}else{j.prepend(n)}j.removeClass("processing").unblock();j.find(".input-text, select").blur();b("html, body").animate({scrollTop:(b("form.checkout").offset().top-100)},1000);if(l.refresh=="true"){b("body").trigger("update_checkout")}b("body").trigger("checkout_error")}},dataType:"html"})}}return false});b("form.checkout_coupon").submit(function(){var j=b(this);if(j.is(".processing")){return false}j.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:0.6}});var k={action:"woocommerce_apply_coupon",security:woocommerce_params.apply_coupon_nonce,coupon_code:j.find("input[name=coupon_code]").val()};b.ajax({type:"POST",url:woocommerce_params.ajax_url,data:k,success:function(l){b(".woocommerce-error, .woocommerce-message").remove();j.removeClass("processing").unblock();if(l){j.before(l);j.slideUp();b("body").trigger("update_checkout")}},dataType:"html"});return false});var g=woocommerce_params.locale.replace(/&quot;/g,'"');var f=b.parseJSON(g);var d=' <abbr class="required" title="'+woocommerce_params.i18n_required_text+'">*</abbr>';b("body").bind("country_to_state_changing",function(k,n,j){var r=j;if(typeof f[n]!="undefined"){var l=f[n]}else{var l=f["default"]}var p={address_1:"#billing_address_1_field, #shipping_address_1_field",address_2:"#billing_address_2_field, #shipping_address_2_field",state:"#billing_state_field, #shipping_state_field",postcode:"#billing_postcode_field, #shipping_postcode_field",city:"#billing_city_field, #shipping_city_field"};b.each(p,function(s,t){var u=r.find(t);if(l[s]){if(l[s]["label"]){u.find("label").html(l[s]["label"])}if(l[s]["placeholder"]){u.find("input").attr("placeholder",l[s]["placeholder"])}u.find("label abbr").remove();if(typeof l[s]["required"]=="undefined"&&f["default"][s]["required"]==true){u.find("label").append(d)}else{if(l[s]["required"]==true){u.find("label").append(d)}}if(s!=="state"){if(l[s]["hidden"]==true){u.hide().find("input").val("")}else{u.show()}}}else{if(f["default"][s]){if(f["default"][s]["required"]==true){if(u.find("label abbr").size()==0){u.find("label").append(d)}}if(s!=="state"&&(typeof f["default"][s]["hidden"]=="undefined"||f["default"][s]["hidden"]==false)){u.show()}}}});var o=r.find("#billing_postcode_field, #shipping_postcode_field");var q=r.find("#billing_city_field, #shipping_city_field");var m=r.find("#billing_state_field, #shipping_state_field");if(!o.attr("data-o_class")){o.attr("data-o_class",o.attr("class"));q.attr("data-o_class",q.attr("class"));m.attr("data-o_class",m.attr("class"))}if(l.postcode_before_city){o.add(q).add(m).removeClass("form-row-first form-row-last").addClass("form-row-wide");o.insertBefore(q)}else{o.attr("class",o.attr("data-o_class"));q.attr("class",q.attr("data-o_class"));m.attr("class",m.attr("data-o_class"));o.insertAfter(m)}}).bind("init_checkout",function(){b("#billing_country, #shipping_country, .country_to_state").change();b("body").trigger("update_checkout")});if(woocommerce_params.is_checkout==1){b("body").trigger("init_checkout")}});